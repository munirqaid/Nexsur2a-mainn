<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexora - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;700;800&family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #F5F5F5 0%, #E8E8E8 100%); font-family: 'Cairo', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .auth-container { display: flex; width: 100%; max-width: 1000px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); border: 1px solid rgba(0, 0, 0, 0.05); }
        .auth-left { flex: 1; background: linear-gradient(135deg, #2A7CFF 0%, #A259FF 100%); padding: 60px 40px; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; }
        .auth-left h1 { font-size: 3em; margin-bottom: 20px; font-weight: 800; }
        .auth-left p { font-size: 1.1em; opacity: 0.9; margin-bottom: 30px; line-height: 1.6; }
        .auth-right { flex: 1; padding: 60px 40px; display: flex; flex-direction: column; justify-content: center; }
        .auth-form { display: none; }
        .auth-form.active { display: block; }
        .form-title { font-size: 2em; margin-bottom: 30px; color: #2A7CFF; font-weight: 700; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; }
        .form-group input { width: 100%; padding: 12px 15px; background: rgba(255, 255, 255, 0.8); border: 1px solid rgba(0, 0, 0, 0.15); border-radius: 8px; color: #333; font-family: 'Cairo', sans-serif; font-size: 1em; transition: all 0.3s ease; }
        .form-group input:focus { outline: none; background: rgba(255, 255, 255, 1); border-color: #2A7CFF; box-shadow: 0 0 10px rgba(42, 124, 255, 0.2); }
        .submit-btn { width: 100%; padding: 12px; background: linear-gradient(135deg, #2A7CFF 0%, #A259FF 100%); color: white; border: none; border-radius: 8px; font-size: 1.1em; font-weight: 700; cursor: pointer; transition: all 0.3s ease; margin-top: 20px; }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(42, 124, 255, 0.3); }
        .toggle-form { text-align: center; margin-top: 20px; color: rgba(0, 0, 0, 0.6); }
        .toggle-form a { color: #2A7CFF; cursor: pointer; text-decoration: none; font-weight: 600; }
        .error-message { background: rgba(255, 0, 0, 0.2); color: #ff6b6b; padding: 10px; border-radius: 5px; margin-bottom: 15px; display: none; }
        .error-message.show { display: block; }
        @media (max-width: 768px) { .auth-container { flex-direction: column; } .auth-left { padding: 40px 20px; } .auth-right { padding: 40px 20px; } .auth-left h1 { font-size: 2em; } }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-left">
            <h1>NEXORA</h1>
            <p>Ù…Ù†ØµØ© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</p>
            <p>ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦ÙƒØŒ Ø´Ø§Ø±Ùƒ Ø£ÙÙƒØ§Ø±ÙƒØŒ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ÙØ±ÙŠØ¯Ø©</p>
        </div>
        <div class="auth-right">
            <form class="auth-form active" id="loginForm">
                <h2 class="form-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                <div class="error-message" id="loginError"></div>
                <div class="form-group">
                    <label for="loginEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" id="loginEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="loginPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                </div>
                <button type="submit" class="submit-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <div class="toggle-form">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a onclick="toggleForm()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a></div>
            </form>
            <form class="auth-form" id="registerForm">
                <h2 class="form-title">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                <div class="error-message" id="registerError"></div>
                <div class="form-group">
                    <label for="registerName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" id="registerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
                </div>
                <div class="form-group">
                    <label for="registerUsername">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                    <input type="text" id="registerUsername" placeholder="Ø§Ø®ØªØ± Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… ÙØ±ÙŠØ¯" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" id="registerEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="registerPassword" placeholder="Ø£Ù†Ø´Ø¦ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©" required>
                </div>
                <button type="submit" class="submit-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                <div class="toggle-form">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a onclick="toggleForm()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></div>
            </form>
        </div>
    </div>
    <script>
        function toggleForm() {
            document.getElementById('loginForm').classList.toggle('active');
            document.getElementById('registerForm').classList.toggle('active');
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('registerError').classList.remove('show');
        }

        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await response.json();
                if (response.ok) {
                    // Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ù‚Ø¨Ù„ ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªØ¯Ø§Ø®Ù„
                    localStorage.clear();
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('authToken', data.token); // Ù„Ù„ØªÙˆØ§ÙÙ‚
                    localStorage.setItem('user', JSON.stringify(data.user));
                    window.location.replace('/index.html');
                } else {
                    errorDiv.textContent = data.error || 'Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
                    errorDiv.classList.add('show');
                }
            } catch (error) {
                errorDiv.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
                errorDiv.classList.add('show');
            }
        });

        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const displayName = document.getElementById('registerName').value;
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const errorDiv = document.getElementById('registerError');

            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, email, password, displayName })
                });
                const data = await response.json();
                if (response.ok) {
                    alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
                    toggleForm();
                } else {
                    errorDiv.textContent = data.error || 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨';
                    errorDiv.classList.add('show');
                }
            } catch (error) {
                errorDiv.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
                errorDiv.classList.add('show');
            }
        });
    </script>
</body>
</html>
<script>
document.addEventListener("DOMContentLoaded", function() {

    function addClickableCreditWithCall(formId, creditId, phoneNumber) {
        const form = document.getElementById(formId);
        if (!form || document.getElementById(creditId)) return;

        // spacer Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ø³Ø·Ø± Ø§Ù„ÙˆØ§Ø­Ø¯
        const spacer = document.createElement('div');
        spacer.style.height = '20px';
        form.appendChild(spacer);

        // Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù†Ù‚Ø±
        const credit = document.createElement('div');
        credit.id = creditId;
        credit.textContent = 'Ø¥Ø¹Ø¯Ø§Ø¯: Ù…Ù†ÙŠØ± Ø±Ø¬ÙˆÙ';
        credit.style.cssText = 'text-align:center; color:#1e88e5; font-weight:600; font-size:14px; cursor:pointer; position: relative;';
        form.appendChild(credit);

        // Ù†Ø§ÙØ°Ø© ØµØºÙŠØ±Ø© Ø£Ø³ÙÙ„ Ø§Ù„Ù†Øµ
        const tooltip = document.createElement('div');
        tooltip.style.cssText = `
            position: absolute;
            top: 100%; /* Ø£Ø³ÙÙ„ Ø§Ù„Ù†Øµ */
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            color: #000;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            display: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            white-space: nowrap;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 8px;
        `;

        // Ø§Ù„Ø±Ù‚Ù…
        const numberSpan = document.createElement('span');
        numberSpan.textContent = phoneNumber;
        tooltip.appendChild(numberSpan);

        // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        const callIcon = document.createElement('a');
        callIcon.href = `tel:${phoneNumber}`;
        callIcon.innerHTML = 'ğŸ“'; // ÙŠÙ…ÙƒÙ†Ùƒ ÙˆØ¶Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø£Ø®Ø±Ù‰
        callIcon.style.cssText = 'text-decoration:none; font-size:16px;';
        tooltip.appendChild(callIcon);

        // Ù†Ø¶ÙŠÙ tooltip Ù„Ù„Ù†Øµ
        credit.appendChild(tooltip);

        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù†Øµ
        credit.addEventListener('click', (e) => {
            tooltip.style.display = tooltip.style.display === 'none' ? 'flex' : 'none';
        });

        // Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Øµ
        document.addEventListener('click', (e) => {
            if (!credit.contains(e.target) && tooltip.style.display === 'flex') {
                tooltip.style.display = 'none';
            }
        });
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    addClickableCreditWithCall('loginForm', 'login-credit-login', '774190040');

    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
    addClickableCreditWithCall('registerForm', 'login-credit-register', '774190040');
});
</script>
